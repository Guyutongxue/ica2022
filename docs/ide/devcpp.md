# 为什么我不推荐 Dev-C++

Dev-C++ 作为 Windows 上最经典的单文件 C++ 开发环境，深受 OI/ACM 选手的喜爱。但是，Dev-C++ 存在着很多问题，比如……

## 编译器版本过低

Dev-C++ 的真正的[官方](https://www.bloodshed.net/)最后一个版本 4.9.9.2，其安装器所带的编译器版本是 GCC 3.4.2。目前网上最流行的，由 [Orwell](https://orwelldevcpp.blogspot.com/) 开发的最后一个版本是 5.11，其安装器所带的编译器版本是 GCC 4.9.2。官方认可的，由 [Embarcadero](https://www.embarcadero.com/free-tools/dev-cpp) 公司提供的现代重构版 6.3，其安装器所带的编译器版本是 GCC 9.2.0。

然而最新版的 GCC 是 12.2.0。

如果你用 4.9.9.2 版的 Dev-C++，意味着你完全无法使用任何 C++11 的特性，那么你通过它所认识的 C++ 跟现在的 C++ 完全不是一个东西。如果你用 5.11 版的 Dev-C++，你能用上大部分 C++11 特性，但 C++17/20 的东西也完全沾不上边。即便是最新的，Dev-C++ 6.3，你也无法使用大部分 C++20 特性。

有人说，我又不用 C++11/20/...，我就喜欢用老版本 C++，甚至我还要用 K&R C。那你把这个页面关掉好了，我也不打算理会你。因为我是希望，所有的学生都能“日日新、常维新”，面向新知识、新技术、新方法编程，而不是守着上个世纪的东西。时代在进步，如果你接受的教育、学到的知识也不进步，那你从起点上就和别人有了差距。

我编写的[教程](https://learn-cpp.tk)，以 C++11 语法为基调，引入了大量 C++17/20/23 特性。这些特性实实在在地帮助学生理清了不少概念，也简化了很多呆板代码。总之，编译器版本过低是 Dev-C++ 的最大诟病。

> 又有人说：我可以用 Dev-C++ 加新版的编译器啊……你可以试试，新版的编译器和调试器在 Dev-C++ 上好不好用。我也做过这方面努力，但效果并不好。不然为什么 Embarcadero 公司还要花那么大力气去维护呢？

## 默认为 ACP 编码而非 UTF-8

关于文本编码的问题，我在[这篇长长的文章](../cpp/encoding)里做了简单的讨论。Visual Studio 也有这个毛病。总之，你用 Dev-C++ 创建的文件编码，和 VS Code、CLion、Mac/Linux 上的任何编辑器的编码方式都不同。我们交流起来也会变得困难。

## 调试困难

Dev-C++ 可以逐步调试，但 bug 很多。这也是 Dev-C++ 后期[分支众多](https://guyutongxue.github.io/pages/devcpp_history/)的原因：每个开发者都想让调试功能变得更稳定。

如果你仔细看这个调试功能的实现方法，就会发现它是基于用户界面输入输出的，也就是需要额外地解析调试器 GDB 的输出格式。一旦 GDB 版本更迭，那调试功能就有可能出问题。而 VS Code、CLion 等工具，都是基于 MI-mode（机器接口模式）的，稳定而且易于操作。所以，在调试方面，没有比 Dev-C++ 更差的了；就连那些在线调试的工具都比它强。

## 缺少智能提示等现代功能

在早期，Dev-C++ 提供有限的自动推荐（Auto suggestion）功能。但随着 C++ 文法的越来越复杂，Dev-C++ 已经无法正确地解析 C++ 文件结构。即便是最勤快的、由北京林业大学瞿老师开发的[小熊猫 C++](https://royqh1979.gitee.io/redpandacpp/)，也无法完全正确解析所有 C++ 代码。

现代的 IDE，使用 LSP 协议与一个称为 Language Server 的特殊工具进行交互，从而获取文件结构、高亮信息和智能提示内容。VS Code 使用的是闭源的智能提示引擎，而 Vim、Emacs 等则倾向于使用开源的 Clangd 语言服务器。这些 Language Server 都由编译器厂商直接参与开发，其质量也有所保证。

## 替代品

- [小熊猫 C++](https://royqh1979.gitee.io/redpandacpp/)，基本代码框架模仿自 Dev-C++，但基本修正了上述问题。其使用 GCC 11.2.0，默认 UTF-8 编码，使用 MI-mode 调试，并用了非常复杂的手写解析器提供智能提示（有问题，但比原版强）。
- [Embarcadero Dev-C++](https://github.com/Embarcadero/Dev-Cpp/releases)，使用 GCC 9.2.0，默认 UTF-8 编码。
